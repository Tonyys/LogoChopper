// ACCORDEON

const accordeonItem = document.querySelectorAll(".info__accordeon-item");

accordeonItem.forEach((currentTab) =>{
	let headPart = currentTab.querySelector(".info__accordeon-head");
	let hiddenPart = currentTab.querySelector(".info__accordeon-hide");

	headPart.addEventListener('click' , (e) =>{
		let hiddenPartHeight = hiddenPart.scrollHeight;
		currentTab.classList.toggle("active");

		currentTab.classList.contains("active") ? hiddenPart.style.maxHeight = hiddenPartHeight + 'px' : hiddenPart.style.maxHeight = null
	})
})

// SWIPER

const swiper = new Swiper('.swiper__main', {
	loop: true,
	autoplay: {
		delay: 4000,
	},
	speed: 900,
	spaceBetween: 70,
	centeredSlides: true,
	breakpoints: {
		320: {
			slidesPerView: 1,
			spaceBetween: 60,
		},
		600: {
			slidesPerView: 1.8
		},
		768: {
			slidesPerView: 2.2
		},
		1024: {
			slidesPerView: 3,
		},
		1640: {
			slidesPerView: 4.6,
		}
	},
});

const swiperBg = new Swiper('.swiper__bg', {
	loop: true,
	centeredSlides: true,
	slidesPerView: 4.6,
	spaceBetween: 70,
	breakpoints: {
		320: {
			slidesPerView: 1,
		},
		600: {
			slidesPerView: 1.8
		},
		768: {
			slidesPerView: 2.2
		},
		1024: {
			slidesPerView: 3,
		},
		1640: {
			slidesPerView: 4.6,
		}
	},
});

swiper.controller.control = swiperBg

const swiperReviews = new Swiper('.reviews__swiper', {
	direction: 'horizontal',
	loop: true,
	autoplay: {
		delay: 4000,
	},
	slidesPerView: 1,

	navigation: {
		nextEl: '.swiper-button-next',
		prevEl: '.swiper-button-prev',
	},

	scrollbar: {
		el: '.swiper-scrollbar',
	},
});

// BURGER

const burgerBtn = document.querySelector('.burger')
const burgerContent = document.querySelector('.mobile')

burgerBtn.addEventListener('click',function () {
	burgerBtn.classList.toggle('active')
	burgerContent.classList.toggle('active')
	document.querySelector('body').classList.toggle('hidden')
})

//FORM

document.querySelector('.reg__icon').addEventListener('click',function (){
	document.getElementById('#addfile').click()
})

const btnPop = document.querySelectorAll('.btn__target')
const popupContent = document.querySelector('.reg')
const contentExit = document.querySelector('.reg__exit')
const contentOut = document.querySelector('.reg__out')

btnPop.forEach(function (item){
	item.addEventListener('click',function (e){
		e.preventDefault()
		popupContent.classList.add('active')
        setTimeout(second, 1000)
		document.querySelector('body').classList.add('active')
	})
    contentExit.addEventListener('click',function (e){
        e.preventDefault()
        setTimeout(first, 1000)
        popupContent.classList.remove('second')
        document.querySelector('body').classList.remove('active')
    })
    contentOut.addEventListener('click',function (){
        setTimeout(first, 1000)
        popupContent.classList.remove('second')
        document.querySelector('body').classList.remove('active')
    })
    function second (){
        popupContent.classList.add('second')
    }
    function first (){
        popupContent.classList.remove('active')
    }
})

//HEADER
const section = document.querySelectorAll('section')
const header = document.querySelector('.header')


section.forEach(function (item){
	window.addEventListener('scroll',function (){
		if(window.scrollY >= item.offsetTop){
			const sectionAttr = item.getAttribute("data-theme")
			if (sectionAttr === "black"){
				header.classList.remove('black')
			}
			if (sectionAttr === "white") {
				header.classList.remove('white')
				header.classList.add('black')
			}
		}
	})

})


const body = document.querySelector('body')

//SCROLL ANIM

var isScrolling = false;

window.addEventListener("scroll",  throttleScroll, false);
throttleScroll() ;

function throttleScroll(e) {
	if (isScrolling == false) {
		window.requestAnimationFrame(function () {
			scrolling(e);
			isScrolling = false;
		});
	}
	isScrolling = true;
}
let fadeArr = document.querySelectorAll('.fade');

function scrolling(e) {
	setTimeout(() => {
// fade
		for (var i = 0; i < fadeArr.length; i++) {
			var fadeItem = fadeArr[i];
			if (isPartiallyVisible(fadeItem)) {
				fadeItem.classList.add("fade-on");
			} else { }
		}
	},300)
}

function isPartiallyVisible(el) {
	var elementBoundary = el.getBoundingClientRect();

	var top = elementBoundary.top;
	var bottom = elementBoundary.bottom;
	var height = elementBoundary.height;

	return ((top + height >= 0) && (height + window.innerHeight >= bottom));
}
function isFullyVisible(el) {
	var elementBoundary = el.getBoundingClientRect();

	var top = elementBoundary.top;
	var bottom = elementBoundary.bottom;

	return ((top >= 0) && (bottom <= window.innerHeight + 150));
}

//Smooth scroll

function scrollTo(element) {
	window.scroll({
		left: 0,
		top: element.offsetTop - 50,
		behavior: 'smooth'
	})
}

const btnScroll = document.querySelector('.intro__navigate');
const project = document.querySelector('.project');

btnScroll.addEventListener('click', (e) => {
	e.preventDefault()
	scrollTo(project);
})

// const translate = document.querySelector('.translate')
// let cnt = 0
//
// translate.addEventListener('click', () =>{
//     document.querySelector('body').style.fontFamily = 'JayCons'
//     cnt++
//     if(cnt === 2){
//         document.querySelector('body').style.fontFamily = 'Inter'
//         cnt = 0
//     }
//     console.log(cnt)
// })
